// ...existing code...
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Registro - Proyecto MD</title>
  <style>
    :root{
      --bg:#f5f7fb;
      --card:#fff;
      --accent:#2563eb;
      --muted:#6b7280;
      --danger:#dc2626;
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
    }
    body{ margin:0; background:var(--bg); color:#0f172a; -webkit-font-smoothing:antialiased; }
    header{
      background:linear-gradient(90deg,var(--accent),#1e3a8a);
      color:#fff;
      padding:16px 20px;
      display:flex;
      align-items:center;
      gap:12px;
    }
    header h1{ font-size:16px; margin:0; }
    .container{ max-width:760px; margin:28px auto; padding:18px; }
    .card{
      background:var(--card);
      border-radius:10px;
      padding:20px;
      box-shadow: 0 6px 18px rgba(2,6,23,.06);
    }
    form { display:grid; gap:12px; }
    .row{ display:flex; gap:12px; }
    .col{ flex:1; display:flex; flex-direction:column; gap:6px; }
    label{ font-size:13px; color:var(--muted); }
    input, select {
      padding:10px 12px;
      border:1px solid #e6e9ef;
      border-radius:8px;
      font-size:14px;
      outline:none;
      background:#fff;
    }
    input:focus, select:focus { box-shadow:0 0 0 4px rgba(37,99,235,.06); border-color:rgba(37,99,235,.6); }
    .help{ font-size:12px; color:var(--muted); }
    .actions{ display:flex; gap:10px; align-items:center; margin-top:6px; }
    button.primary{
      background:var(--accent); color:#fff; border:0; padding:10px 14px; border-radius:8px; cursor:pointer;
    }
    button.ghost{
      background:transparent; border:1px solid #e6e9ef; padding:9px 12px; border-radius:8px; cursor:pointer;
    }
    .msg { padding:10px 12px; border-radius:8px; font-size:14px; }
    .msg.success { background:#ecfdf5; color:#065f46; border:1px solid #bbf7d0; }
    .msg.error { background:#fff1f2; color:var(--danger); border:1px solid #fecaca; }
    .pw-row{ display:flex; gap:8px; align-items:center; }
    .pw-toggle{ background:transparent; border:0; cursor:pointer; color:var(--muted); font-size:13px; }
    .meter{ height:8px; border-radius:6px; background:#eef2ff; overflow:hidden; }
    .meter > i{ display:block; height:100%; width:0%; background:linear-gradient(90deg,#f97316,#84cc16); transition:width .25s ease; }
    .note{ font-size:12px; color:var(--muted); margin-top:6px; }
    footer{ text-align:center; color:var(--muted); padding:18px 0; font-size:13px; }
    @media (max-width:640px){
      .row{ flex-direction:column; }
    }
  </style>
</head>
<body>
  <header>
    <a href="index.html" style="color:#fff;text-decoration:none;font-weight:600;">← Inicio</a>
    <h1>Registro de usuarios</h1>
  </header>

  <main class="container">
    <div class="card" role="main" aria-labelledby="reg-title">
      <h2 id="reg-title" style="margin:0 0 10px 0;">Crear cuenta</h2>
      <p class="help" style="margin:0 0 12px 0;">Rellena los datos para crear tu cuenta. Los campos marcados con * son obligatorios.</p>

      <form id="registerForm" novalidate>
        <div class="row">
          <div class="col">
            <label for="fullname">Nombre completo *</label>
            <input id="fullname" name="fullname" type="text" required minlength="3" placeholder="Ej. Juan Pérez" />
            <div class="help" id="fullnameHelp"></div>
          </div>
          <div class="col">
            <label for="username">Usuario *</label>
            <input id="username" name="username" type="text" required minlength="3" placeholder="ejemplo_usuario" />
            <div class="help" id="usernameHelp"></div>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <label for="email">Correo electrónico *</label>
            <input id="email" name="email" type="email" required placeholder="correo@dominio.com" />
            <div class="help" id="emailHelp"></div>
          </div>
          <div class="col">
            <label for="role">Tipo de usuario</label>
            <select id="role" name="role">
              <option value="estudiante">Estudiante</option>
              <option value="docente">Docente</option>
              <option value="otro">Otro</option>
            </select>
          </div>
        </div>

        <div>
          <label for="password">Contraseña *</label>
          <div class="pw-row">
            <input id="password" name="password" type="password" required minlength="6" placeholder="Mínimo 6 caracteres" style="flex:1" />
            <button type="button" class="pw-toggle" id="togglePw" aria-label="Mostrar contraseña">Mostrar</button>
          </div>
          <div class="meter" aria-hidden="true" style="margin-top:8px;">
            <i id="pwMeter"></i>
          </div>
          <div class="help" id="passwordHelp">Usa letras y números para mayor seguridad.</div>
        </div>

        <div>
          <label for="password2">Repetir contraseña *</label>
          <input id="password2" name="password2" type="password" required placeholder="Repite la contraseña" />
          <div class="help" id="password2Help"></div>
        </div>

        <div class="actions">
          <button class="primary" type="submit">Crear cuenta</button>
          <button class="ghost" type="button" id="cancelBtn">Cancelar</button>
          <div id="formMsg" style="margin-left:auto"></div>
        </div>

        <p class="note">Al registrarte aceptas los términos y condiciones del proyecto.</p>
      </form>
    </div>

    <footer>Proyecto MD — Registro</footer>
  </main>

  <script>
    (function(){
      const form = document.getElementById('registerForm');
      const fullname = document.getElementById('fullname');
      const username = document.getElementById('username');
      const email = document.getElementById('email');
      const password = document.getElementById('password');
      const password2 = document.getElementById('password2');
      const togglePw = document.getElementById('togglePw');
      const pwMeter = document.getElementById('pwMeter');
      const formMsg = document.getElementById('formMsg');
      const cancelBtn = document.getElementById('cancelBtn');

      // Mostrar / ocultar contraseña
      togglePw.addEventListener('click', () => {
        const t = password;
        if (t.type === 'password') { t.type = 'text'; togglePw.textContent = 'Ocultar'; }
        else { t.type = 'password'; togglePw.textContent = 'Mostrar'; }
      });

      // Indicador simple de fuerza de contraseña
      function passwordStrength(pw){
        let score = 0;
        if(!pw) return 0;
        if (pw.length >= 6) score += 1;
        if (/[a-z]/.test(pw) && /[A-Z]/.test(pw)) score += 1;
        if (/\d/.test(pw)) score += 1;
        if (/[^A-Za-z0-9]/.test(pw)) score += 1;
        return Math.min(4, score);
      }

      function updateMeter(){
        const s = passwordStrength(password.value);
        const percent = (s/4)*100;
        pwMeter.style.width = percent + '%';
        // color by strength
        if (s <= 1) pwMeter.style.background = '#f87171'; // rojo
        else if (s === 2) pwMeter.style.background = '#f59e0b'; // naranja
        else if (s === 3) pwMeter.style.background = '#60a5fa'; // azul
        else pwMeter.style.background = '#34d399'; // verde
      }

      password.addEventListener('input', updateMeter);

      // Validaciones básicas
      function showMessage(type, text){
        formMsg.innerHTML = '';
        const div = document.createElement('div');
        div.className = 'msg ' + (type === 'ok' ? 'success' : 'error');
        div.textContent = text;
        formMsg.appendChild(div);
        // autohide después de 4s
        setTimeout(()=> { if (formMsg.contains(div)) formMsg.removeChild(div); }, 4000);
      }

      function validateForm(){
        let ok = true;
        // limpiar mensajes inline
        document.querySelectorAll('.help').forEach(h=>h.textContent='');

        if (fullname.value.trim().length < 3) {
          document.getElementById('fullnameHelp').textContent = 'Ingresa tu nombre completo (mín. 3 caracteres).';
          ok = false;
        }
        if (username.value.trim().length < 3) {
          document.getElementById('usernameHelp').textContent = 'El usuario debe tener mínimo 3 caracteres.';
          ok = false;
        }
        if (!email.checkValidity()) {
          document.getElementById('emailHelp').textContent = 'Ingresa un correo válido.';
          ok = false;
        }
        if (password.value.length < 6) {
          document.getElementById('passwordHelp').textContent = 'La contraseña debe tener al menos 6 caracteres.';
          ok = false;
        }
        if (password.value !== password2.value) {
          document.getElementById('password2Help').textContent = 'Las contraseñas no coinciden.';
          ok = false;
        }
        return ok;
      }

      // Simulación de envío: guarda en localStorage (demo) y muestra mensaje
      form.addEventListener('submit', function(e){
        e.preventDefault();
        if (!validateForm()) {
          showMessage('err', 'Corrige los errores del formulario.');
          return;
        }

        // construir objeto usuario (no guardar contraseñas en texto en producción)
        const user = {
          fullname: fullname.value.trim(),
          username: username.value.trim(),
          email: email.value.trim(),
          role: document.getElementById('role').value,
          createdAt: new Date().toISOString()
        };

        // demo: guardar en localStorage
        try {
          const key = 'proyecto_md_users';
          const existing = JSON.parse(localStorage.getItem(key) || '[]');
          existing.push(user);
          localStorage.setItem(key, JSON.stringify(existing));
          showMessage('ok', 'Registro completado. Ya puedes iniciar sesión.');
          form.reset();
          updateMeter();
        } catch (err) {
          showMessage('err', 'Error al guardar los datos en el navegador.');
        }
      });

      cancelBtn.addEventListener('click', function(){
        // volver al inicio o limpiar
        location.href = 'index.html';
      });

      // accesibilidad: limpiar mensajes en input
      [fullname, username, email, password, password2].forEach(inp=>{
        inp.addEventListener('input', ()=> {
          const help = document.getElementById(inp.id + 'Help');
          if (help) help.textContent = '';
        });
      });

      // iniciar meter (por si hay valores prellenados)
      updateMeter();
    })();
  </script>
</body>
</html>
// ...existing code...